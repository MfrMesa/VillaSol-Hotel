import { useState, useRef, useEffect, useContext } from "react";
import { UserMyContext } from "/src/globalvariable/usuarioglobal.jsx"
// import style from "./Login.module.css";
import style from "./Login.module.css";
import { Link } from "react-router-dom";
import { FormattedMessage } from 'react-intl';

export default function Login() {


  // VARIABLE GLOBAL
  const { globaluser, setGlobaluser } = useContext(UserMyContext);
  // VARIABLE GLOBAL

  const [formVisible, setFormVisible] = useState(false);
  const inputRef1 = useRef(null);
  const inputRef2 = useRef(null);
  const toggleFormVisibility = () => {
    setFormVisible(!formVisible);
  };
  useEffect(() => {
    if (formVisible) {
      inputRef1.current.focus();
    } else {
      inputRef2.current.focus();
    }
  }, [formVisible]);

  // CONTROLAR FORMULARIO REGISTRAR

  let [bbd, setbbd] = useState([]);
  const [formErrors, setFormErrors] = useState({
    name: "",
    email: "",
    password: "",
  });

  useEffect(() => {
    const storedUsers = JSON.parse(localStorage.getItem("users")) || [];
    setbbd(storedUsers);
  }, []);

  const [users, setusers] = useState({
    email: "",
    password: "",
    name: "",
  });
  const handleInputChange = (e) => {
    const { name, value } = e.target;
    console.log(name);
    console.log(value);
    if (value.length >= 8) {
      setFormErrors({});
    }
    setusers({
      ...users,
      [name]: value,
    });
  };

  const validateForm = () => {
    const errors = {};
    if (!users.email.includes("@")) {
      errors.email = "El correo electrónico debe contener '@'";
    }
    if (users.password.length <= 8) {
      errors.password = "* La contraseña debe tener al menos 8 caracteres";
    }
    setFormErrors(errors);
    console.log(formErrors);
    return Object.keys(errors).length === 0;
  };

  const añadirUser = (e) => {
    e.preventDefault();
    const isValid = validateForm();

    // Verificar si el formulario es válido antes de agregar el usuario
    if (isValid) {
      // Verificar si los campos no están vacíos antes de agregar el usuario
      if (
        users.name.trim() !== "" &&
        users.email.trim() !== "" &&
        users.password.trim() !== ""
      ) {
        const newuser = bbd ? [...bbd, users] : [users];
        setbbd(newuser);
        localStorage.setItem("users", JSON.stringify(newuser));

        setusers({
          name: "",
          email: "",
          password: "",
        });
      }
    }
  };

  // validacion de login
  const loginValidate = (e) => {
    e.preventDefault();
    if (bbd.length > 0) {
      const usuario = bbd.find((usuario) => {
        return (
          usuario.email === users.email && usuario.password === users.password
        );
      });
      if (usuario) {
        setGlobaluser({
          ...globaluser,
          login: true,
          name: usuario.name,
          email: usuario.email,
        });
        console.log(globaluser);
      } else {
        alert("DATOS ERRONEOS");
      }
    }
    setusers({
      name: "",
      email: "",
      password: "",
    });
  };
  // validacion de login
  return (
    <div className={style.backgroundLogin}>
      <Link
        className={style.linktoHome}
        to="/"
        onClick={() => console.log(globaluser)}
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 -960 960 960"
          width="30px"
          fill=""
        >
          <path d="M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h280v80H200v560h280v80H200Zm440-160-55-58 102-102H360v-80h327L585-622l55-58 200 200-200 200Z" />
        </svg>
        <span>
          <link />
          Volver{" "}
        </span>
      </Link>

      <div className={style.loginpage}>
        <div className={style.form}>
          <div className={style.logoLogin}>
            <svg
              width=" 7rem"
              viewBox="0 0 662 519"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M660.276 300.752C656.942 301.592 565.815 303.367 539.573 303.109C539.534 303.11 489.498 302.816 468.507 303.188C457.559 303.381 438.685 303.17 448.379 301.111C449.949 300.774 484.369 300.165 494.811 300.29C519.595 300.573 566.592 300.523 605.899 300.019C628.782 299.732 644.105 299.682 656.911 299.824C660.457 299.864 662.041 300.308 660.276 300.752Z"
                fill="currentColor"
              />
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M524.359 262.748C523.411 263.866 491.697 272.67 482.355 274.417C482.341 274.42 464.582 277.953 457.267 279.943C453.452 280.981 446.726 282.21 449.59 279.354C450.052 278.887 462.048 275.625 465.771 274.953C474.605 273.345 491.196 269.692 504.947 266.162C512.954 264.114 518.354 262.889 522.918 262.053C524.182 261.823 524.862 262.157 524.359 262.748Z"
                fill="currentColor"
              />
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M536.235 258.995C536.423 259.602 533.1 261.69 531.836 261.765C531.835 261.766 529.505 262.044 528.724 262.5C528.317 262.737 527.399 262.773 527.007 261.272C526.942 261.026 528.222 260.279 528.733 260.265C529.942 260.221 532.001 259.736 533.538 259.014C534.436 258.599 535.094 258.418 535.717 258.392C535.89 258.386 536.136 258.674 536.235 258.995Z"
                fill="currentColor"
              />
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M634.682 169.37C631.991 171.509 549.689 210.673 525.673 221.25C525.637 221.267 479.924 241.615 460.951 250.603C451.055 255.29 433.771 262.874 441.756 257.004C443.047 256.05 474.159 241.313 483.724 237.124C506.424 227.171 549.225 207.761 584.833 191.107C605.565 181.417 619.507 175.057 631.234 169.91C634.482 168.486 636.108 168.238 634.682 169.37Z"
                fill="currentColor"
              />
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M499.777 189.17C499.28 190.722 470.475 213.271 461.628 219.043C461.616 219.053 444.89 230.245 438.228 235.404C434.754 238.095 428.372 242.222 430.096 238.07C430.372 237.394 441.296 228.935 444.832 226.659C453.216 221.245 468.692 210.427 481.304 200.946C488.651 195.432 493.673 191.873 498.001 189.072C499.201 188.297 500.042 188.35 499.777 189.17Z"
                fill="currentColor"
              />
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M501.533 187.593C500.814 187.08 502.143 184.172 503.288 183.737C503.288 183.736 505.275 182.803 505.618 182.153C505.797 181.814 506.646 181.514 508.356 182.802C508.637 183.013 508.074 184.079 507.596 184.241C506.476 184.631 504.933 185.678 504.101 186.795C503.61 187.442 503.14 187.801 502.566 188.005C502.406 188.061 501.913 187.863 501.533 187.593Z"
                fill="currentColor"
              />
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M516.272 119.648C515.19 121.869 470.658 167.558 457.291 180.169C457.272 180.189 431.925 204.377 421.641 214.875C416.277 220.35 406.645 229.403 410.063 223.217C410.614 222.213 427.477 204.999 432.812 199.996C445.464 188.114 469.041 165.164 488.434 145.642C499.729 134.281 507.393 126.774 513.927 120.631C515.737 118.931 516.846 118.473 516.272 119.648Z"
                fill="currentColor"
              />
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M442.242 132.448C442.357 134.16 422.913 167.405 416.495 176.487C416.486 176.501 404.458 193.944 399.94 201.578C397.583 205.56 392.939 212.075 393.015 207.343C393.023 206.574 400.433 194.056 403.01 190.457C409.115 181.905 420.064 165.313 428.73 151.14C433.781 142.893 437.316 137.462 440.465 133.04C441.338 131.817 442.182 131.542 442.242 132.448Z"
                fill="currentColor"
              />
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M448.693 122.442C449.764 122.718 449.524 125.966 448.384 126.746C448.384 126.748 446.485 128.275 446.378 129.015C446.322 129.402 445.466 129.957 442.887 129.233C442.464 129.115 442.639 127.901 443.124 127.595C444.257 126.866 445.586 125.366 446.053 124.018C446.335 123.234 446.721 122.738 447.3 122.361C447.462 122.257 448.127 122.296 448.693 122.442Z"
                fill="currentColor"
              />
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M459.411 5.28986C458.722 8.65802 420.781 91.5306 409.162 115.061C409.145 115.097 387.17 160.05 378.397 179.123C373.821 189.071 365.441 205.984 367.792 196.356C368.169 194.796 382.556 163.52 387.199 154.167C398.208 131.96 418.555 89.5964 435.156 53.9638C444.827 33.2223 451.431 19.3947 457.115 7.91887C458.69 4.7414 459.777 3.50709 459.411 5.28986Z"
                fill="currentColor"
              />
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M368.399 106.861C369.189 108.384 364.669 146.631 362.42 157.522C362.418 157.539 358.373 178.337 357.286 187.141C356.719 191.733 355.069 199.562 353.246 195.195C352.945 194.487 354.728 180.05 355.65 175.72C357.824 165.44 361.221 145.853 363.493 129.397C364.824 119.818 365.89 113.427 367.007 108.114C367.318 106.644 367.981 106.055 368.399 106.861Z"
                fill="currentColor"
              />
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M370.308 95.1096C371.4 94.9337 372.48 98.0069 371.747 99.1779C371.747 99.1792 370.618 101.338 370.816 102.06C370.919 102.437 370.357 103.288 367.703 103.657C367.268 103.718 366.944 102.534 367.265 102.06C368.012 100.939 368.63 99.0326 368.519 97.6098C368.463 96.779 368.619 96.1699 368.999 95.5925C369.105 95.4322 369.731 95.2024 370.308 95.1096Z"
                fill="currentColor"
              />
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M333.035 43.5726C333.816 45.9162 333.978 109.718 333.256 128.08C333.256 128.108 332.076 163.124 332.076 177.82C332.076 185.485 331.531 198.692 329.644 191.882C329.335 190.779 329.335 166.681 329.644 159.375C330.367 142.032 331.148 109.139 331.339 81.6219C331.457 65.6025 331.679 54.8771 332.047 45.9162C332.15 43.4347 332.622 42.3319 333.035 43.5726Z"
                fill="currentColor"
              />
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M293.163 103.327C294.423 104.493 303.12 142.011 304.692 153.02C304.695 153.037 307.932 173.976 309.89 182.628C310.911 187.141 312.01 195.066 308.815 191.574C308.293 191.01 305.082 176.822 304.484 172.435C303.048 162.027 299.613 142.447 296.178 126.194C294.187 116.73 293.026 110.355 292.279 104.978C292.073 103.489 292.498 102.71 293.163 103.327Z"
                fill="currentColor"
              />
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M290.981 91.6236C291.949 91.0883 294.006 93.6144 293.712 94.9644C293.713 94.9655 293.382 97.3794 293.812 97.9915C294.037 98.3108 293.796 99.3027 291.424 100.548C291.036 100.752 290.329 99.7488 290.472 99.1936C290.795 97.8861 290.73 95.8831 290.144 94.5818C289.811 93.819 289.751 93.193 289.913 92.5212C289.959 92.3343 290.469 91.9063 290.981 91.6236Z"
                fill="currentColor"
              />
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M210.323 0.934276C212.3 3.74685 246.552 88.2114 255.696 112.809C255.711 112.846 273.333 159.677 281.188 179.146C285.285 189.301 291.838 207.002 286.448 198.685C285.571 197.34 272.692 165.415 269.073 155.619C260.474 132.373 243.617 88.5032 229.088 51.9769C220.635 30.71 215.108 16.418 210.66 4.40861C209.429 1.08249 209.277 -0.555047 210.323 0.934276Z"
                fill="currentColor"
              />
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M216.419 129.848C218.116 130.453 241.988 163.084 248.045 173.064C248.056 173.078 259.817 191.957 265.276 199.501C268.123 203.436 272.453 210.634 267.929 208.58C267.192 208.251 258.24 195.88 255.853 191.892C250.174 182.436 238.781 164.951 228.762 150.678C222.936 142.364 219.185 136.688 216.246 131.806C215.433 130.453 215.522 129.526 216.419 129.848Z"
                fill="currentColor"
              />
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M213.615 127.986C212.995 128.554 209.676 126.238 209.215 124.925C209.213 124.923 208.206 122.585 207.465 122.02C207.079 121.726 206.764 120.759 208.318 119.432C208.573 119.214 209.787 120.14 209.956 120.681C210.367 121.956 211.523 123.878 212.786 125.097C213.518 125.811 213.916 126.41 214.131 127.064C214.19 127.247 213.943 127.686 213.615 127.986Z"
                fill="currentColor"
              />
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M149.325 112.797C151.511 113.879 196.071 158.259 208.352 171.576C208.371 171.595 231.93 196.848 242.167 207.097C247.507 212.443 256.321 222.038 250.242 218.623C249.255 218.072 232.467 201.267 227.597 195.952C216.026 183.347 193.665 159.856 174.632 140.53C163.556 129.275 156.241 121.639 150.259 115.129C148.604 113.326 148.169 112.224 149.325 112.797Z"
                fill="currentColor"
              />
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M165.747 187.936C167.376 187.887 198.253 207.502 206.649 213.912C206.663 213.92 222.8 225.945 229.888 230.501C233.585 232.877 239.607 237.512 235.118 237.275C234.389 237.24 222.766 229.771 219.439 227.198C211.535 221.105 196.168 210.133 183.018 201.414C175.366 196.331 170.334 192.787 166.247 189.643C165.116 188.771 164.885 187.961 165.747 187.936Z"
                fill="currentColor"
              />
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M163.673 186.809C163.431 187.658 160.245 187.376 159.453 186.443C159.452 186.443 157.909 184.882 157.181 184.776C156.802 184.721 156.236 184.021 156.879 181.978C156.983 181.643 158.177 181.818 158.488 182.214C159.23 183.14 160.732 184.243 162.064 184.655C162.838 184.901 163.333 185.224 163.717 185.697C163.823 185.83 163.802 186.36 163.673 186.809Z"
                fill="currentColor"
              />
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M32.43 166.723C35.7702 167.537 117.176 208.53 140.259 221.014C140.294 221.032 184.4 244.662 203.134 254.138C212.905 259.08 229.495 268.082 219.962 265.375C218.416 264.94 187.697 249.402 178.522 244.415C156.74 232.588 115.161 210.682 80.1695 192.769C59.8015 182.335 46.2288 175.222 34.9719 169.115C31.8551 167.423 30.6621 166.291 32.43 166.723Z"
                fill="currentColor"
              />
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M138.703 261.233C139.965 260.674 170.458 266.205 179.092 268.552C179.106 268.555 195.608 272.837 202.624 274.147C206.284 274.831 212.49 276.545 208.892 277.792C208.308 277.998 196.803 275.849 193.371 274.893C185.223 272.636 169.661 268.935 156.559 266.293C148.932 264.748 143.851 263.574 139.641 262.413C138.475 262.09 138.035 261.528 138.703 261.233Z"
                fill="currentColor"
              />
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M127.097 259.548C127.187 258.957 130.86 258.548 131.962 259.003C131.963 259.002 134.052 259.721 134.901 259.655C135.343 259.62 136.137 259.966 135.853 261.399C135.808 261.634 134.417 261.743 133.977 261.546C132.935 261.087 130.991 260.655 129.392 260.637C128.461 260.621 127.829 260.505 127.29 260.272C127.141 260.206 127.05 259.861 127.097 259.548Z"
                fill="currentColor"
              />
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M0.731699 299.953C4.07973 299.172 95.2246 299.01 121.457 299.732C121.497 299.732 171.52 300.911 192.514 300.911C203.464 300.911 222.331 301.457 212.602 303.344C211.026 303.653 176.601 303.653 166.163 303.344C141.388 302.621 94.3974 301.84 55.0878 301.649C32.203 301.531 16.881 301.309 4.07973 300.941C0.534757 300.838 -1.04078 300.366 0.731699 299.953Z"
                fill="currentColor"
              />
              <path
                d="M97.6099 419.055L72.497 354.568L66.193 352.914V350.331H88.2055V352.914L79.5245 354.361V354.671L99.9868 408.617H100.71L120.449 354.671V354.361L111.355 352.914V350.331H130.577V352.914L125.203 354.051L99.7801 419.055H97.6099ZM139.398 418.538V415.955L147.459 414.198V354.671L139.398 352.914V350.331H161.721V352.914L153.66 354.671V414.198L161.721 415.955V418.538H139.398ZM173.652 418.538V415.955L181.713 414.198V354.671L173.652 352.914V350.331H197.214V352.914L187.913 354.671V414.921H215.92L220.777 396.629H222.844V418.538H173.652ZM234.762 418.538V415.955L242.823 414.198V354.671L234.762 352.914V350.331H258.325V352.914L249.024 354.671V414.921H277.03L281.888 396.629H283.955V418.538H234.762ZM290.548 418.538V415.955L296.025 414.715L322.378 349.814H324.548L350.798 414.611L356.999 415.955V418.538H334.986V415.955L343.77 414.611L335.089 392.702H308.943L300.572 414.611L309.77 415.955V418.538H290.548ZM310.39 389.085H333.643L321.861 359.218L310.39 389.085ZM432.129 419.572C428.133 419.572 424.722 419.158 421.898 418.332C419.073 417.505 416.145 416.334 413.113 414.818L412.08 398.903H413.94L419.831 412.028C422.173 413.75 424.447 414.921 426.651 415.541C428.856 416.093 431.13 416.368 433.472 416.368C438.088 416.368 441.568 415.162 443.91 412.751C446.252 410.271 447.424 406.826 447.424 402.417C447.424 399.11 446.631 396.526 445.047 394.666C443.531 392.806 441.326 391.152 438.433 389.705C435.608 388.258 432.266 386.57 428.408 384.641C425.377 383.126 422.828 381.61 420.761 380.094C418.763 378.578 417.247 376.821 416.214 374.823C415.18 372.757 414.663 370.207 414.663 367.176C414.663 364.213 415.559 361.389 417.35 358.702C419.211 355.946 421.587 353.707 424.481 351.984C427.375 350.193 430.475 349.297 433.782 349.297C436.814 349.297 439.57 349.676 442.05 350.434C444.599 351.192 447.217 352.26 449.904 353.638L450.937 369.14H449.077L444.53 356.841C442.808 355.257 441.12 354.12 439.466 353.431C437.813 352.742 435.884 352.398 433.679 352.398C429.476 352.398 426.238 353.603 423.964 356.015C421.691 358.426 420.554 361.354 420.554 364.799C420.554 367.417 421.071 369.622 422.104 371.413C423.207 373.204 424.86 374.823 427.065 376.27C429.269 377.717 432.06 379.267 435.436 380.921C439.57 382.919 442.98 384.848 445.667 386.708C448.354 388.499 450.317 390.566 451.558 392.909C452.867 395.251 453.521 398.214 453.521 401.797C453.521 405.241 452.453 408.307 450.317 410.994C448.251 413.612 445.598 415.714 442.36 417.298C439.122 418.814 435.711 419.572 432.129 419.572ZM497.69 419.572C491.489 419.572 485.943 418.056 481.051 415.025C476.228 411.993 472.405 407.825 469.58 402.52C466.755 397.215 465.343 391.186 465.343 384.435C465.343 377.683 466.755 371.654 469.58 366.349C472.405 361.044 476.228 356.876 481.051 353.844C485.943 350.813 491.489 349.297 497.69 349.297C503.959 349.297 509.506 350.813 514.328 353.844C519.22 356.876 523.078 361.044 525.903 366.349C528.728 371.654 530.14 377.683 530.14 384.435C530.14 391.186 528.728 397.215 525.903 402.52C523.078 407.825 519.22 411.993 514.328 415.025C509.506 418.056 503.959 419.572 497.69 419.572ZM499.86 416.472C504.545 416.472 508.679 415.3 512.261 412.958C515.913 410.546 518.738 407.205 520.736 402.933C522.734 398.593 523.733 393.494 523.733 387.638C523.733 380.542 522.493 374.341 520.012 369.036C517.532 363.731 514.191 359.632 509.988 356.738C505.785 353.776 501.1 352.294 495.933 352.294C491.248 352.294 487.08 353.466 483.428 355.808C479.777 358.151 476.917 361.492 474.851 365.832C472.784 370.104 471.75 375.168 471.75 381.024C471.75 388.121 472.99 394.356 475.471 399.73C478.02 405.035 481.396 409.168 485.598 412.131C489.87 415.025 494.624 416.472 499.86 416.472ZM541.984 418.538V415.955L550.045 414.198V354.671L541.984 352.914V350.331H565.546V352.914L556.245 354.671V414.921H584.252L589.109 396.629H591.176V418.538H541.984Z"
                fill="currentColor"
              />
              <path
                d="M193.881 494.017C192.816 494.017 191.931 493.665 191.228 492.962C190.545 492.259 190.203 491.385 190.203 490.34C190.203 489.295 190.545 488.431 191.228 487.747C191.931 487.044 192.816 486.693 193.881 486.693C194.905 486.693 195.769 487.044 196.473 487.747C197.176 488.431 197.528 489.295 197.528 490.34C197.528 491.385 197.176 492.259 196.473 492.962C195.769 493.665 194.905 494.017 193.881 494.017ZM213.533 498.538V498.056L216.065 496.82V480.363L213.533 479.127V478.645H222.214V479.127L219.833 480.363V487.446H228.966V480.363L226.585 479.127V478.645H235.236V479.127L232.764 480.363V496.82L235.236 498.056V498.538H226.585V498.056L228.966 496.82V489.104H219.833V496.82L222.214 498.056V498.538H213.533ZM250.343 498.84C248.876 498.84 247.52 498.589 246.274 498.086C245.028 497.564 243.943 496.85 243.018 495.946C242.094 495.022 241.371 493.937 240.848 492.691C240.346 491.445 240.095 490.078 240.095 488.591C240.095 487.104 240.346 485.738 240.848 484.492C241.371 483.246 242.094 482.171 243.018 481.267C243.943 480.343 245.028 479.629 246.274 479.127C247.52 478.604 248.876 478.343 250.343 478.343C251.83 478.343 253.196 478.604 254.442 479.127C255.688 479.629 256.773 480.343 257.698 481.267C258.622 482.171 259.335 483.246 259.838 484.492C260.36 485.738 260.621 487.104 260.621 488.591C260.621 490.078 260.36 491.445 259.838 492.691C259.335 493.937 258.622 495.022 257.698 495.946C256.773 496.85 255.688 497.564 254.442 498.086C253.196 498.589 251.83 498.84 250.343 498.84ZM250.886 497.303C252.011 497.303 252.995 496.981 253.839 496.338C254.704 495.695 255.377 494.791 255.859 493.625C256.341 492.46 256.582 491.083 256.582 489.496C256.582 487.547 256.281 485.849 255.678 484.402C255.095 482.955 254.292 481.84 253.267 481.056C252.262 480.252 251.137 479.85 249.891 479.85C248.786 479.85 247.791 480.172 246.907 480.815C246.043 481.438 245.359 482.332 244.857 483.497C244.355 484.663 244.104 486.039 244.104 487.627C244.104 489.576 244.405 491.274 245.008 492.721C245.611 494.168 246.424 495.293 247.449 496.097C248.494 496.901 249.64 497.303 250.886 497.303ZM269.209 498.538V498.056L272.344 496.82V480.302H267.792L265.532 485.035H265.049V478.645H283.436V485.035H282.954L280.693 480.302H276.142V496.82L279.246 498.056V498.538H269.209ZM287.729 498.538V498.056L290.261 496.82V480.363L287.729 479.127V478.645H303.494V483.859H303.011L300.932 480.302H294.029V487.446H298.882L300.51 484.884H300.992V491.606H300.51L298.882 489.104H294.029V496.881H301.685L303.855 492.661H304.338V498.538H287.729ZM309.4 498.538V498.056L311.932 496.82V480.363L309.4 479.127V478.645H318.533V479.127L315.7 480.363V496.881H322.632L324.923 491.455H325.405V498.538H309.4ZM353.788 498.84C351.959 498.84 350.482 498.388 349.357 497.483C348.231 496.559 347.669 495.303 347.669 493.716C347.669 492.671 348 491.676 348.663 490.732C349.347 489.767 350.412 488.883 351.858 488.079C351.235 487.416 350.743 486.833 350.381 486.331C350.04 485.828 349.789 485.346 349.628 484.884C349.467 484.402 349.387 483.859 349.387 483.256C349.387 482.392 349.648 481.588 350.17 480.845C350.693 480.081 351.406 479.478 352.311 479.036C353.215 478.574 354.24 478.343 355.385 478.343C357.073 478.343 358.399 478.715 359.364 479.458C360.348 480.202 360.841 481.166 360.841 482.352C360.841 483.236 360.439 484.04 359.635 484.763C358.851 485.487 357.606 486.24 355.897 487.024C356.058 487.205 356.229 487.386 356.41 487.567C356.591 487.727 356.772 487.908 356.952 488.109L361.564 492.721C362.589 491.194 363.523 489.214 364.367 486.783L361.414 485.607V485.125H368.738V485.607L366.146 486.723C365.543 488.049 364.93 489.295 364.307 490.46C363.704 491.606 363.071 492.641 362.408 493.565L365.784 496.971L368.286 498.056V498.538H362.257L360.057 496.338C359.173 497.142 358.218 497.765 357.194 498.207C356.169 498.629 355.033 498.84 353.788 498.84ZM352.853 482.262C352.853 482.945 353.034 483.578 353.396 484.161C353.777 484.743 354.35 485.437 355.114 486.24C355.817 485.658 356.37 485.055 356.772 484.432C357.173 483.789 357.374 483.065 357.374 482.262C357.374 481.538 357.173 480.935 356.772 480.453C356.37 479.951 355.817 479.699 355.114 479.699C354.41 479.699 353.858 479.941 353.456 480.423C353.054 480.885 352.853 481.498 352.853 482.262ZM351.195 492.691C351.195 493.977 351.567 494.982 352.311 495.705C353.074 496.408 354.059 496.76 355.264 496.76C356.651 496.76 357.937 496.308 359.123 495.404L354.451 490.701C354.129 490.38 353.818 490.068 353.516 489.767C353.215 489.466 352.944 489.194 352.702 488.953C352.079 489.536 351.668 490.119 351.467 490.701C351.286 491.264 351.195 491.927 351.195 492.691ZM396.63 498.84C395.344 498.84 394.218 498.719 393.254 498.478C392.309 498.217 391.365 497.845 390.42 497.363L390.119 492.329H390.661L392.5 495.795C393.746 496.82 395.052 497.333 396.419 497.333C397.544 497.333 398.448 497.061 399.131 496.519C399.815 495.956 400.156 495.162 400.156 494.138C400.156 493.374 399.975 492.761 399.614 492.299C399.272 491.817 398.74 491.385 398.016 491.003C397.293 490.601 396.348 490.139 395.183 489.616C393.776 488.933 392.691 488.2 391.927 487.416C391.164 486.612 390.782 485.537 390.782 484.191C390.782 483.427 390.973 482.694 391.355 481.99C391.736 481.287 392.239 480.664 392.862 480.121C393.505 479.579 394.218 479.147 395.002 478.825C395.806 478.504 396.63 478.343 397.474 478.343C398.478 478.343 399.413 478.464 400.277 478.705C401.161 478.926 402.005 479.247 402.809 479.669L403.11 484.492H402.598L400.759 481.176C400.176 480.734 399.634 480.403 399.131 480.182C398.629 479.961 398.056 479.85 397.413 479.85C396.569 479.85 395.866 480.132 395.303 480.694C394.761 481.257 394.489 481.97 394.489 482.834C394.489 483.739 394.791 484.472 395.394 485.035C395.997 485.577 397.001 486.18 398.408 486.843C399.634 487.406 400.639 487.958 401.422 488.501C402.206 489.044 402.789 489.656 403.17 490.34C403.552 491.023 403.743 491.867 403.743 492.872C403.743 493.836 403.532 494.69 403.11 495.434C402.708 496.157 402.156 496.78 401.452 497.303C400.769 497.805 400.006 498.187 399.162 498.448C398.318 498.709 397.474 498.84 396.63 498.84ZM408.346 498.538V498.056L410.877 496.82V480.363L408.346 479.127V478.645H417.72C420.091 478.645 421.99 479.077 423.417 479.941C424.863 480.785 425.587 482.141 425.587 484.01C425.587 485.135 425.205 486.13 424.442 486.994C423.698 487.838 422.673 488.501 421.367 488.983C420.081 489.466 418.624 489.707 416.996 489.707H414.645V496.82L417.599 498.056V498.538H408.346ZM414.645 480.302V488.169H416.574C418.162 488.169 419.408 487.808 420.312 487.084C421.216 486.341 421.668 485.406 421.668 484.281C421.668 482.874 421.206 481.86 420.282 481.237C419.378 480.614 418.071 480.302 416.363 480.302H414.645ZM426.789 498.538V498.056L428.657 497.031L436.464 478.494H438.574L446.291 496.971L448.34 498.056V498.538H439.659V498.056L442.282 497.001L440.142 491.756H432.907L430.798 497.001L433.299 498.056V498.538H426.789ZM433.601 490.099H439.448L436.525 482.895L433.601 490.099ZM467.139 494.017C466.074 494.017 465.19 493.665 464.487 492.962C463.803 492.259 463.462 491.385 463.462 490.34C463.462 489.295 463.803 488.431 464.487 487.747C465.19 487.044 466.074 486.693 467.139 486.693C468.164 486.693 469.028 487.044 469.731 487.747C470.435 488.431 470.786 489.295 470.786 490.34C470.786 491.385 470.435 492.259 469.731 492.962C469.028 493.665 468.164 494.017 467.139 494.017Z"
                fill="currentColor"
              />
            </svg>{" "}
          </div>
          {/* FORMULARIO REGISTRO SE GUARDA EN LOCALESTORAGE */}
          <form
            className={formVisible ? style.visibleR : style.novisible}
            onSubmit={añadirUser}
          >
            <div>
              <p>
                <FormattedMessage id="datos"/>
              </p>
              <div className={style.inputR}>
                <input
                  type="text"
                  name="name"
                  placeholder="Nombre"
                  required
                  ref={inputRef1}
                  value={users.name}
                  onChange={handleInputChange}
                />
                <input
                  type="email"
                  name="email"
                  required
                  placeholder="Email"
                  value={users.email}
                  onChange={handleInputChange}
                />
                {/* {formErrors.email && <span className={style.error} >{formErrors.email}</span>} */}

                <input
                  type="password"
                  name="password"
                  required
                  placeholder="Contraseña"
                  value={users.password}
                  onChange={handleInputChange}
                />
                <span className={formErrors.password && style.error}>
                  {formErrors.password}
                </span>
              </div>
              <hr />
            </div>

            <br />
            <button type="submit">
              <FormattedMessage id="cuenta"/>
            </button>
          </form>

          {/* FORMULARIO LOGIN */}
          <form
            className={formVisible ? style.novisible : style.visiblelogin}
            onSubmit={loginValidate}
          >
            <div>
              <p>
                <FormattedMessage id="sesion"/>
              </p>
              <input
                type="email"
                required
                placeholder="Email"
                name="email"
                value={users.email}
                ref={inputRef2}
                onChange={handleInputChange}
              />

              <input
                type="password"
                name="password"
                required
                placeholder="Contraseña"
                value={users.password}
                onChange={handleInputChange}
              />
            </div>

            <div>
              <hr />
              <button type="submit">Sign up</button>
            </div>
          </form>

          {/* TOGGLE CAMBIO FORMULARIO */}
          <div className={style.message}>
            <span
              style={{
                color: !formVisible && "#B08912",
                fontWeight: !formVisible && "bold",
              }}
            >
              Sign up
            </span>
            <label className={style.moveit}>
              <input type="checkbox" onClick={toggleFormVisibility} />
              <span className={style.slider}></span>
            </label>
            <span
              style={{
                color: formVisible && "#B08912",
                fontWeight: formVisible && "bold",
              }}
            >
              {" "}
              <FormattedMessage id="registrarse"/>
            </span>
          </div>
          {/* TOGGLE CAMBIO FORMULARIO */}
        </div>
      </div>
    </div>
  );
}
